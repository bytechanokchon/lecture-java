## ความมหัศจรรย์ของ Java: ไบต์โค้ด (Java’s Magic: The Bytecode)
Java Byte Code ทำให้เราสามารถรันโปรแกรมที่ถูกเขียนด้วยภาษา Java จากที่ไหนก็ได้ โดยใช้ความสามารถของ Java Virtual Machine ซึ่งเป็นส่วนหนึ่งของ Java Runtime Environment (JRE)

<mark>JVM ถูกสร้างขึ้นเพื่อแปรง java byte code เป็น machine code</mark>

โดยแต่ละระบบปฏิบัติการจะมี JVM ที่ถูกออกแบบมาสำหรับระบบนั้น ๆ ซึ่งไม่ว่า byte code จะถูกคอมไพมาจากระบบปฏิบัติการอะไร ถ้าหาก JVM สามารถูกติดตั้งได้ ก็จะสามารถทำงานบนระบบนั้นได้

JVM ยังช่วยให้โปรแกรมมีความปลอดภัยมากขึ้นด้วย โดยในการทำงาน มันจะสร้างสิ่งที่เรียกว่า sandbox ซึ่งป้องกันไม่ให้โปรแกรมเรียกใช้งานทรัพยากรณ์แบบไม่จำกัด

โดยทั่วไปแล้ว การใช้งาน native code จะช้ากว่าการใช้งานแบบ machine code เนื่องจาก จำเป็นต้องมีตัวแปรภาษามาขั้นระหว่างการทำงานก่อน

(code) ---> (jvm) ---> (machine code)

(code) ---> (machine code)

*byte code เป็น native code*

แต่ในการทดสอบของ JVM พบว่าไม่ได้มี่ความแตกต่างกันมากในเรื่องของความเร็ว เนื่องจาก byte code ถูกออกแบบและทดสอบมาเป็นอย่างดี

ในช่วงแรกที่ภาษา java ถูกปล่อยออกมาให้ใช้งาน เราพบว่ามันมีความช้ากว่า C/C++ เป็นอย่างมาก เนื่องจากการทำงานแบบแปล byte code เป็น machine code มันจะแปลทีละคำสั่งทุกครั้งที่จะทำงาน ทำให้เกิดเทคโนโลยีใหม่ขึ้นมาที่มีชื่อว่า HotSpot

HotSpot จะสังเกตพฤติกรรมการรันโปรแกรม ดูว่า method ไหน / loop ไหน ถูกเรียกใช้งานบ่อย มันจะใช้สิ่งที่เรียกว่า Just-In-Time Compiler (JIT) ช่วยแปลชุดคำสั่งนั้นเป็น machine code เก็บไว้ ทำให้การทำงานทุกครั้งไม่จำเป็นต้องแปลชุดคำสั่งพวกนี้อีก สามารถส่งคำสั่งไปให้ cpu ไปทำงานได้ทันที

แต่เราจะไม่แปลงชุดคำสั่งทุกชุดไปเป็น machine code เนื่องจาก เราต้องการให้ชุดคำสั่งสามารถรันได้บนทุกอุปกรณ์ การจะแปลชุดคสั่งจาก byte code ไปเป็น machine code จะใช้เวลาคอมไพล์ + หน่วยความจำ ทำให้อาจะเกิดปัญหาในอุปกรณ์ขนาดเล็ก เช่น อุปกรณ์ในตู้ไมโครเวฟ ที่มีแรมและซีพียูที่มีพลังประมวลผลน้อย